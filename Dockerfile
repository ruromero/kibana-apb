FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBraWJhbmEtYXBiCmRlc2NyaXB0aW9uOiBBUEIgdG8gZGVw\
bG95IEtpYmFuYSBPU1MKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToK\
ICBkaXNwbGF5TmFtZTogIktpYmFuYSAoQVBCKSIKICBkZXBlbmRlbmNpZXM6IFsnZG9ja2VyLmVs\
YXN0aWMuY28va2liYW5hL2tpYmFuYS1vc3M6Ni4yLjEnXQogIGltYWdlVXJsOiBodHRwczovL3d3\
dy5lbGFzdGljLmNvL2Fzc2V0cy9ibHQyODJhZTI0MjBlMzJmYzM4L2ljb24ta2liYW5hLWJiLnN2\
ZwogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vd3d3LmVsYXN0aWMuY28vZ3VpZGUvZW4va2li\
YW5hLzYuMS9pbmRleC5odG1sCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4i\
CnRhZ3M6CiAgLSBraWJhbmEKICAtIGVsYXN0aWNzZWFyY2gKcGxhbnM6CiAgLSBuYW1lOiBlcGhl\
bWVyYWwKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBLaWJhbmEgd2l0aG91dCBw\
ZXJzaXN0ZW50IGNhY2hlCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxh\
eU5hbWU6IEVwaGVtZXJhbCBpbnN0YWxsYXRpb24KICAgIGRlZmF1bHQ6IFRydWUKICAgIHBhcmFt\
ZXRlcnM6CiAgICAtIG5hbWU6IGFwcGxpY2F0aW9uX25hbWUKICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgIGRlZmF1bHQ6IGtpYmFuYQogICAgICBkZXNjcmlwdGlvbjogS2liYW5hIGFwcGxpY2F0aW9u\
CiAgICAgIHRpdGxlOiBBcHBsaWNhdGlvbiBuYW1lCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAt\
IG5hbWU6IGtpYmFuYV9tZW1vcnlfbGltaXQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRlZmF1\
bHQ6IDI1Nk1pCiAgICAgIGRlc2NyaXB0aW9uOiBNZW1vcnkgbGltaXQgZm9yIEtpYmFuYSBjb250\
YWluZXIKICAgICAgdGl0bGU6IE1lbW9yeSBsaW1pdAogICAgICByZXF1aXJlZDogdHJ1ZQogICAg\
LSBuYW1lOiBraWJhbmFfdmVyc2lvbgogICAgICB0aXRsZTogVmVyc2lvbgogICAgICByZXF1aXJl\
ZDogdHJ1ZQogICAgICBkZWZhdWx0OiA2LjIuMQogICAgICB0eXBlOiBlbnVtCiAgICAgIGVudW06\
IFsiNi4yLjEiLCAiNi4xLjIiLCAiNS41LjIiXQogICAgLSBuYW1lOiBraWJhbmFfc2VjdXJlCiAg\
ICAgIHR5cGU6IGJvb2xlYW4KICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICBkZXNjcmlwdGlvbjog\
QWxsb3cgYWNjZXNzIG9ubHkgdG8gT3BlblNoaWZ0IHVzZXJzIGhhdmluZyBhY2Nlc3MgdG8gdGhl\
IHNlcnZpY2UKICAgICAgdGl0bGU6IFNlY3VyZWQgYWNjZXNzCiAgLSBuYW1lOiBwZXJzaXN0ZW50\
CiAgICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgS2liYW5hIHdpdGggcGVyc2lzdGVu\
dCBjYWNoZQogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBQ\
ZXJzaXN0ZW50IGluc3RhbGxhdGlvbgogICAgcGFyYW1ldGVyczoKICAgIC0gbmFtZTogYXBwbGlj\
YXRpb25fbmFtZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVmYXVsdDoga2liYW5hCiAgICAg\
IGRlc2NyaXB0aW9uOiBLaWJhbmEgYXBwbGljYXRpb24KICAgICAgdGl0bGU6IEFwcGxpY2F0aW9u\
IG5hbWUKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZToga2liYW5hX21lbW9yeV9saW1p\
dAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVmYXVsdDogMjU2TWkKICAgICAgZGVzY3JpcHRp\
b246IE1lbW9yeSBsaW1pdCBmb3IgS2liYW5hIGNvbnRhaW5lcgogICAgICB0aXRsZTogTWVtb3J5\
IGxpbWl0CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IGtpYmFuYV9wdmNfc2l6ZQog\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVmYXVsdDogMjAwTWkKICAgICAgZGVzY3JpcHRpb246\
IEtpYmFuYSBzdG9yYWdlIHNpemUKICAgICAgdGl0bGU6IEtpYmFuYSBzdG9yYWdlCiAgICAgIHJl\
cXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IGtpYmFuYV92ZXJzaW9uCiAgICAgIHRpdGxlOiBWZXJz\
aW9uCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIGRlZmF1bHQ6IDYuMi4xCiAgICAgIHR5cGU6\
IGVudW0KICAgICAgZW51bTogWyI2LjIuMSIsICI2LjEuMiIsICI1LjUuMiJdCiAgICAtIG5hbWU6\
IGtpYmFuYV9zZWN1cmUKICAgICAgdHlwZTogYm9vbGVhbgogICAgICBkZWZhdWx0OiB0cnVlCiAg\
ICAgIGRlc2NyaXB0aW9uOiBBbGxvdyBhY2Nlc3Mgb25seSB0byBPcGVuU2hpZnQgdXNlcnMgaGF2\
aW5nIGFjY2VzcyB0byB0aGUgc2VydmljZQogICAgICB0aXRsZTogU2VjdXJlZCBhY2Nlc3MK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
